<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>ArcGIS API for JavaScript Hello World App</title>
	<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
	
	<style type="text/css">
html, body, #basicMap {
	width: 100%;
	height: 100%;
	margin: 0;
	padding: 0;
}
	</style>
	
	<link rel="stylesheet" href="https://js.arcgis.com/3.25/esri/css/esri.css">
	<!-- <link rel="stylesheet" href="https://js.arcgis.com/4.13/esri/css/main.css"> -->
	
	<script src="https://js.arcgis.com/3.25/"></script>
	<!-- <script src="https://js.arcgis.com/4.13/"></script> -->
	<script type="text/javascript">
	/*
		dojoConfig = {
			locale: "ru",
			parseOnLoad: true
		  };
	*/

		var lat = 55.03146;
		var lng = 82.92317;
		var mapContainerID = "basicMap";
		var _map;
		
//API 3.25
		require([
			"esri/map", 
//"dojo/domReady!",
//"esri/dijit/Legend",
"esri/symbols/SimpleMarkerSymbol",
"esri/symbols/SimpleLineSymbol",
"esri/geometry/Point",
"esri/Color",
"esri/symbols/PictureMarkerSymbol",
//"esri/arcgis/utils",
"esri/graphic",
"esri/layers/GraphicsLayer",
//"esri/geometry/webMercatorUtils"
			], function(
Map,
//Legend,
SimpleMarkerSymbol,
SimpleLineSymbol,
Point,
Color,
PictureMarkerSymbol,
//arcgisUtils,
Graphic,
GraphicsLayer,
//webMercatorUtils
) {
			
			_map = new Map(mapContainerID, {
				//A valid basemap name.
				basemap: "streets",
//"topo", "streets" | "satellite" | "hybrid" | "topo" | "gray" | "dark-gray" | "oceans" | 
//"national-geographic" | "terrain" | "osm" | "dark-gray-vector" | "gray-vector" | 
//"streets-vector" | "streets-night-vector" | 
//"streets-relief-vector" | "streets-navigation-vector" | "topo-vector"
				center: [lng, lat],
				zoom: 15
			});
      
console.log("Point:", Point);
			
			_map.on("load", function(e) {
console.log("load _map ", e);
        
var symbol = new SimpleMarkerSymbol({
  "color": [255,255,255,64],
  "size": 12,
  "angle": -30,
  "xoffset": 0,
  "yoffset": 0,
  "type": "esriSMS",
  //"style": "esriSMSCircle",
  //"style": "esriSMSCross",
  "style": "esriSMSDiamond",
  "outline": {
    "color": [0,0,0,255],
    "width": 1,
    "type": "esriSLS",
    "style": "esriSLSSolid"
  }
});        
console.log(symbol);

        
				var _gLayer = new GraphicsLayer();
				_map.addLayer(_gLayer);
				
				var point = new Point( lng, lat);
				_gLayer.remove(_graphic);
				_point = new Point( point );

				var _markerSymbol = new PictureMarkerSymbol({
					url: "https://static.arcgis.com/images/Symbols/Shapes/BlackStarLargeB.png",
					width: 64,
					height: 64,
					yoffset: 12
				});

				var _graphic = new Graphic(_point, _markerSymbol);
				//var _graphic = new Graphic(_point, symbol);
				_gLayer.add(_graphic);
				
			});//end event
		
			_map.on("click", function(e){
console.log("_map click", e);
	//var point = new Point(lng, lat);
	/*
				_map.graphics.clear(); //clear existing graphics
				
				//define the symbology used to display the results and input point
				var pointSymbol = new SimpleMarkerSymbol(
"diamond", 
20, 
new SimpleLineSymbol("solid",	new Color([88,116,152]), 2),
new Color([88,116,152,0.45]) 
				);
				
				var inPoint = new Point(e.mapPoint.x, e.mapPoint.y, _map.spatialReference);
				var location = new Graphic(inPoint, pointSymbol);
				_map.graphics.add(location);
*/
			});//end event

		});//end require

/*
//API 4.13
		require([
		  "esri/Map",
		  "esri/views/MapView"
		], function(Map, MapView) {

		  window.map = new Map({
			//basemap: "topo-vector"
			basemap: "streets"
			//basemap: "topo"
		  });
console.log(map);


		  window.view = new MapView({
			container: "basicMap",
			map: map,
			//center: [-118.71511,34.09042],
			center: [lng, lat],
			zoom: 15
		  });
//console.log(view);
console.log(map.basemap.title);
console.log(view.center.latitude);

			view.on("click", function(event) {
console.log(event);			

			 // you must overwrite default click-for-popup
			 // behavior to display your own popup
			 //view.popup.autoOpenEnabled = false;

			 // Get the coordinates of the click on the view
			 //var lat = Math.round(event.mapPoint.latitude * 1000) / 1000;
			 //var lon = Math.round(event.mapPoint.longitude * 1000) / 1000;

			 //view.popup.open({
			   // Set the popup's title to the coordinates of the location
			   //title: "Reverse geocode: [" + lon + ", " + lat + "]",
			   //location: event.mapPoint // Set the location of the popup to the clicked location
			   //content: "This is a point of interest"  // content displayed in the popup
			 //});

			});

view.when(function(e){
  // This function will execute once the promise is resolved
console.log(e);			
}, function(error){
  // This function will execute if the promise is rejected due to an error
});

		});
*/		

/*
var map;
require(["esri/map"], function(Map) {
  map = new Map("map", {
    basemap: "topo",
    center: [-122.45, 37.75],
    zoom: 13
  });
});
*/
		
	</script>
	
</head>

<!-- <body onload="init();"> -->
<body>
  
<pre>
https://developers.arcgis.com/javascript/latest/guide/quick-start/
https://developers.arcgis.com/javascript/3/jssamples/
</pre>
		<div id="basicMap"></div>
</body> 
</html>